import{initContactPopupFunction}from"./contact.min.js";document.addEventListener("DOMContentLoaded",function(){(()=>{const e=(new Date).getFullYear();document.querySelector(".footer__year").textContent=e})(),initContactPopupFunction();const e={rootMargin:"-200px"},t=document.querySelectorAll(".to-animate");if(window.innerWidth>=900){const n=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animated"),t.unobserve(e.target))})},e);t.forEach(e=>{n.observe(e)})}else t.forEach(e=>e.classList.remove("to-animate"));const n=document.querySelector(".back-to-top");window.addEventListener("scroll",()=>{window.scrollY>=500?(n.classList.remove("hidden"),n.classList.add("active")):window.scrollY<500&&n.classList.contains("active")&&(n.classList.remove("active"),n.classList.add("hidden"))}),n.addEventListener("click",()=>{window.scrollTo({top:0})});const s=document.querySelector(".nav__link-img-conditioning"),r=document.querySelector(".nav__link-img-recuperation"),i=document.querySelector(".nav__link-img-wodkan");fetch("./images/svg/fan-icon.svg").then(e=>e.text()).then(e=>{s.innerHTML=e}).catch(e=>console.error(e)),fetch("./images/svg/recuperation-icon.svg").then(e=>e.text()).then(e=>{r.innerHTML=e}).catch(e=>console.error(e)),fetch("./images/svg/wod-kan-icon.svg").then(e=>e.text()).then(e=>{i.innerHTML=e}).catch(e=>console.error(e));const o=document.querySelectorAll(".counter__stats-stat"),a=document.querySelector(".counter");new IntersectionObserver(e=>{e[0].isIntersecting&&o.forEach(e=>{const t=()=>{const n=e.getAttribute("data-number"),s=parseInt(e.textContent);e.classList.add("show");s<n?(e.textContent=`${Math.floor(s+2)}`,setTimeout(t,5)):e.textContent=n};t()})},{rootMargin:"-250px"}).observe(a);const c=document.querySelector(".gallery__images"),l=document.querySelectorAll(".gallery__img"),d=document.querySelector(".gallery__btn--next"),u=document.querySelector(".gallery__btn--prev"),h=document.querySelector(".gallery__popup"),m=h.querySelector(".gallery__popup-img"),g=h.querySelector(".gallery__close-popup");let v,w,y=1;const b=()=>{l[y].classList.remove("active"),y--,l[y].classList.add("active"),v=window.innerWidth>=900?33.33:100,w=(y-1)*v,c.style.transform=`translateX(${-w}%)`},L=()=>{l[y].classList.remove("active"),y++,l[y].classList.add("active"),v=window.innerWidth>=900?33.33:100,w=(y-1)*v,c.style.transform=`translateX(${-w}%)`},_=()=>{h.classList.toggle("active"),document.body.classList.toggle("popup-active")};window.addEventListener("resize",()=>{v=window.innerWidth>=900?33.33:100,w=(y-1)*v,c.style.transform=`translateX(${-w}%)`}),h.addEventListener("click",e=>{e.target===h&&_()}),l.forEach(e=>e.addEventListener("click",()=>{const t=e.getAttribute("src"),n=e.getAttribute("alt");m.setAttribute("src",t),m.setAttribute("alt",n),_()})),g.addEventListener("click",_),window.innerWidth<=900&&(u.classList.add("disabled"),u.setAttribute("disabled","true")),u.addEventListener("click",()=>{1===y&&window.innerWidth>=900||2===y&&window.innerWidth<900?(b(),u.classList.add("disabled"),u.setAttribute("disabled","true")):(d.classList.remove("disabled"),d.removeAttribute("disabled"),b())}),d.addEventListener("click",()=>{y===l.length-2?(L(),d.classList.add("disabled"),d.setAttribute("disabled","true")):(u.removeAttribute("disabled"),u.classList.remove("disabled"),d.classList.remove("disabled"),d.removeAttribute("disabled"),L())});const p=document.querySelector(".reviews__reviews"),f=document.querySelectorAll(".reviews__box");let q,A,S,x=0;const E=()=>{let e=window.innerWidth>=800?50:100,t=window.innerWidth>=800?f.length-2:f.length-1;if(x>=t)x=0,p.style.transform="translateX(0)";else{x++;let t=x*e;p.style.transform=`translateX(${-t}%)`}};window.addEventListener("resize",()=>{let e=window.innerWidth>=800?50:100,t=x*e;p.style.transform=`translateX(${-t}%)`}),S=setInterval(E,4e3),p.addEventListener("touchstart",e=>{e.preventDefault(),q=e.touches[0].clientX,clearInterval(S)}),p.addEventListener("touchend",e=>{e.preventDefault(),A=e.changedTouches[0].clientX,k(),S=setInterval(E,4e3)});const k=()=>{const e=window.innerWidth>=800?50:100,t=window.innerWidth>=800?f.length-2:f.length-1;q-A>50&&x<t?x++:A-q>50&&x>0&&x--,p.style.transform=`translateX(${-e*x}%)`};document.querySelectorAll(".questions__accordion-toggler").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".questions__accordion-box").querySelector(".questions__accordion-answer"),n=t.style.height&&"0px"!==t.style.height;document.querySelectorAll(".questions__accordion-answer").forEach(e=>{if(e!==t){e.setAttribute("aria-hidden","true"),e.style.height=e.scrollHeight+"px",requestAnimationFrame(()=>{e.style.height="0"});const t=e.closest(".questions__accordion-box").querySelector(".questions__accordion-toggler");t.classList.remove("opened"),t.setAttribute("aria-expanded","false")}}),n?(t.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"),e.classList.remove("opened"),t.style.height=t.scrollHeight+"px",requestAnimationFrame(()=>{t.style.height="0"})):(t.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true"),e.classList.add("opened"),t.style.height=t.scrollHeight+"px")})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsIm5hbWVzIjpbImluaXRDb250YWN0UG9wdXBGdW5jdGlvbiIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImN1cnJlbnRZZWFyIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiaGFuZGxlRm9vdGVyWWVhciIsInNlY3Rpb25PcHRpb25zIiwicm9vdE1hcmdpbiIsInRvQW5pbWF0ZVNlY3Rpb25zIiwicXVlcnlTZWxlY3RvckFsbCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJzZWN0aW9uT2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJvYnNlcnZlciIsImZvckVhY2giLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwidW5vYnNlcnZlIiwic2VjdGlvbiIsIm9ic2VydmUiLCJyZW1vdmUiLCJiYWNrVG9Ub3BBcnJvd0J0biIsInNjcm9sbFkiLCJjb250YWlucyIsInNjcm9sbFRvIiwidG9wIiwiYWlyQ29uZGl0aW9uaW5nSW1nIiwicmVjdXBlcmF0aW9uSW1nIiwid29ka2FuSW1nIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwidGV4dCIsImRhdGEiLCJpbm5lckhUTUwiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNvdW50ZXJJdGVtcyIsImNvdW50ZXJCb3giLCJjb3VudGVyIiwidXBkYXRlQ291bnRlciIsImZpbmFsTnVtYmVyIiwiZ2V0QXR0cmlidXRlIiwidmFsdWUiLCJwYXJzZUludCIsIk1hdGgiLCJmbG9vciIsInNldFRpbWVvdXQiLCJpbWFnZXNCb3giLCJhbGxJbWFnZXMiLCJuZXh0QnRuIiwicHJldkJ0biIsInBvcHVwIiwicG9wdXBJbWciLCJjbG9zZVBvcHVwQnRuIiwic3RlcCIsIndpZHRoIiwiaW5kZXgiLCJzaG93UHJldkltZyIsInN0eWxlIiwidHJhbnNmb3JtIiwic2hvd05leHRJbWciLCJzaG93UG9wdXAiLCJ0b2dnbGUiLCJib2R5IiwiZSIsImltZyIsInNyYyIsImFsdCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImxlbmd0aCIsInJldmlld3NCb3giLCJhbGxSZXZpZXdzIiwic3RhcnRYIiwiZW5kWCIsInJldmlld3NDYXJvdXNlbGxJbnRlcnZhbCIsInJldmlld3NJbmRleCIsImhhbmRsZVJldmlld3NDYXJvdXNlbGwiLCJkZXZpY2VJbmRleCIsInNldEludGVydmFsIiwicHJldmVudERlZmF1bHQiLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsZWFySW50ZXJ2YWwiLCJjaGFuZ2VkVG91Y2hlcyIsImhhbmRsZVN3aXBlIiwibWF4SW5kZXgiLCJ0b2dnbGVyIiwiYW5zd2VyIiwiY2xvc2VzdCIsImlzT3BlbiIsImhlaWdodCIsIm90aGVyQW5zd2VyIiwic2Nyb2xsSGVpZ2h0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib3RoZXJUb2dnbGVyIl0sInNvdXJjZXMiOlsic2NyaXB0LmpzIl0sIm1hcHBpbmdzIjoiT0FBU0EsNkJBQWdDLG1CQUN6Q0MsU0FBU0MsaUJBQWlCLG1CQUFvQixXQUNwQixNQUN4QixNQUFNQyxHQUFjLElBQUlDLE1BQU9DLGNBQy9CSixTQUFTSyxjQUFjLGlCQUFpQkMsWUFBY0osR0FFdkRLLEdBQ0FSLDJCQUVBLE1BQU1TLEVBQWlCLENBQ3RCQyxXQUFZLFVBR1BDLEVBQW9CVixTQUFTVyxpQkFBaUIsZUFDcEQsR0FBSUMsT0FBT0MsWUFBYyxJQUFLLENBQzdCLE1BQU1DLEVBQWtCLElBQUlDLHFCQUFxQixDQUFDQyxFQUFTQyxLQUMxREQsRUFBUUUsUUFBU0MsSUFDWkEsRUFBTUMsaUJBQ1RELEVBQU1FLE9BQU9DLFVBQVVDLElBQUksWUFDM0JOLEVBQVNPLFVBQVVMLEVBQU1FLFlBR3pCYixHQUVIRSxFQUFrQlEsUUFBU08sSUFDMUJYLEVBQWdCWSxRQUFRRCxJQUUxQixNQUNDZixFQUFrQlEsUUFBU08sR0FDMUJBLEVB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TWlDLE9BQ25EckcsU0FDRVcsaUJBQWlCLGdDQUNqQk8sUUFBU29GLElBQ1QsR0FBSUEsSUFBZ0JKLEVBQVEsQ0FDM0JJLEVBQVl4QixhQUFhLGNBQWUsUUFDeEN3QixFQUFZbEMsTUFBTWlDLE9BQVNDLEVBQVlDLGFBQWUsS0FDdERDLHNCQUFzQixLQUNyQkYsRUFBWWxDLE1BQU1pQyxPQUFTLE1BRzVCLE1BQU1JLEVBQWVILEVBQ25CSCxRQUFRLDZCQUNSOUYsY0FBYyxpQ0FDaEJvRyxFQUFhbkYsVUFBVUssT0FBTyxVQUM5QjhFLEVBQWEzQixhQUFhLGdCQUFpQixRQUM1QyxJQUdFc0IsR0FDSEYsRUFBT3BCLGFBQWEsY0FBZSxRQUNuQ21CLEVBQVFuQixhQUFhLGdCQUFpQixTQUN0Q21CLEVBQVEzRSxVQUFVSyxPQUFPLFVBQ3pCdUUsRUFBTzlCLE1BQU1pQyxPQUFTSCxFQUFPSyxhQUFlLEtBQzVDQyxzQkFBc0IsS0FDckJOLEVBQU85QixNQUFNaUMsT0FBUyxRQUd2QkgsRUFBT3BCLGFBQWEsY0FBZSxTQUNuQ21CLEVBQVFuQixhQUFhLGdCQUFpQixRQUN0Q21CLEVBQVEzRSxVQUFVQyxJQUFJLFVBQ3RCMkUsRUFBTzlCLE1BQU1pQyxPQUFTSCxFQUFPSyxhQUFlLFNBSWhEIiwiaWdub3JlTGlzdCI6W10sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRDb250YWN0UG9wdXBGdW5jdGlvbiB9IGZyb20gXCIuL2NvbnRhY3QubWluLmpzXCI7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRjb25zdCBoYW5kbGVGb290ZXJZZWFyID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvb3Rlcl9feWVhclwiKS50ZXh0Q29udGVudCA9IGN1cnJlbnRZZWFyO1xyXG5cdH07XHJcblx0aGFuZGxlRm9vdGVyWWVhcigpO1xyXG5cdGluaXRDb250YWN0UG9wdXBGdW5jdGlvbigpXHJcblx0Ly8gU0VDVGlPTiBBTklNQVRJT05TXHJcblx0Y29uc3Qgc2VjdGlvbk9wdGlvbnMgPSB7XHJcblx0XHRyb290TWFyZ2luOiBcIi0yMDBweFwiLFxyXG5cdH07XHJcblxyXG5cdGNvbnN0IHRvQW5pbWF0ZVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50by1hbmltYXRlXCIpO1xyXG5cdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA5MDApIHtcclxuXHRcdGNvbnN0IHNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcclxuXHRcdFx0ZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG5cdFx0XHRcdGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xyXG5cdFx0XHRcdFx0ZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhbmltYXRlZFwiKTtcclxuXHRcdFx0XHRcdG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LCBzZWN0aW9uT3B0aW9ucyk7XHJcblxyXG5cdFx0dG9BbmltYXRlU2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG5cdFx0XHRzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShzZWN0aW9uKTtcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR0b0FuaW1hdGVTZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PlxyXG5cdFx0XHRzZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0by1hbmltYXRlXCIpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0Ly8gSEFORExFIEJBQ0sgVE8gVE9QXHJcblxyXG5cdGNvbnN0IGJhY2tUb1RvcEFycm93QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYWNrLXRvLXRvcFwiKTtcclxuXHJcblx0Y29uc3QgaGFuZGxlQmFja1RvVG9wID0gKCkgPT4ge1xyXG5cdFx0Y29uc3Qgd2luZG93SGVpZ2h0ID0gNTAwO1xyXG5cdFx0aWYgKHdpbmRvdy5zY3JvbGxZID49IHdpbmRvd0hlaWdodCkge1xyXG5cdFx0XHRiYWNrVG9Ub3BBcnJvd0J0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRiYWNrVG9Ub3BBcnJvd0J0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdFx0fSBlbHNlIGlmIChcclxuXHRcdFx0d2luZG93LnNjcm9sbFkgPCB3aW5kb3dIZWlnaHQgJiZcclxuXHRcdFx0YmFja1RvVG9wQXJyb3dCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpXHJcblx0XHQpIHtcclxuXHRcdFx0YmFja1RvVG9wQXJyb3dCdG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHRcdFx0YmFja1RvVG9wQXJyb3dCdG4uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVCYWNrVG9Ub3ApO1xyXG5cdGJhY2tUb1RvcEFycm93QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHR3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAgfSk7XHJcblx0fSk7XHJcblxyXG5cdC8vIEFERElORyBTVkcgSUNPTlMgVE8gTkFWIFNFQ1RJT05cclxuXHRjb25zdCBhaXJDb25kaXRpb25pbmdJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XCIubmF2X19saW5rLWltZy1jb25kaXRpb25pbmdcIlxyXG5cdCk7XHJcblx0Y29uc3QgcmVjdXBlcmF0aW9uSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX2xpbmstaW1nLXJlY3VwZXJhdGlvblwiKTtcclxuXHRjb25zdCB3b2RrYW5JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbGluay1pbWctd29ka2FuXCIpO1xyXG5cdGZldGNoKFwiLi9pbWFnZXMvc3ZnL2Zhbi1pY29uLnN2Z1wiKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4gcmVzLnRleHQoKSlcclxuXHRcdC50aGVuKChkYXRhKSA9PiB7XHJcblx0XHRcdGFpckNvbmRpdGlvbmluZ0ltZy5pbm5lckhUTUwgPSBkYXRhO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cdGZldGNoKFwiLi9pbWFnZXMvc3ZnL3JlY3VwZXJhdGlvbi1pY29uLnN2Z1wiKVxyXG5cdFx0LnRoZW4oKHJlcykgPT4gcmVzLnRleHQoKSlcclxuXHRcdC50aGVuKChkYXRhKSA9PiB7XHJcblx0XHRcdHJlY3VwZXJhdGlvbkltZy5pbm5lckhUTUwgPSBkYXRhO1xyXG5cdFx0fSlcclxuXHRcdC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG5cdGZldGNoKFwiLi9pbWFnZXMvc3ZnL3dvZC1rYW4taWNvbi5zdmdcIilcclxuXHRcdC50aGVuKChyZXMpID0+IHJlcy50ZXh0KCkpXHJcblx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHR3b2RrYW5JbWcuaW5uZXJIVE1MID0gZGF0YTtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuXHJcblx0Ly8gQURESU5HIFNWRyBJQ09OUyBUTyBOQVYgU0VDVElPTlxyXG5cclxuXHRjb25zdCBjb3VudGVySXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvdW50ZXJfX3N0YXRzLXN0YXRcIik7XHJcblx0Y29uc3QgY291bnRlckJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY291bnRlclwiKTtcclxuXHJcblx0Y29uc3Qgb3B0aW9ucyA9IHtcclxuXHRcdHJvb3RNYXJnaW46IFwiLTI1MHB4XCIsXHJcblx0fTtcclxuXHRjb25zdCBzdGFydENvdW50ZXIgPSAoZW50cnkpID0+IHtcclxuXHRcdGlmIChlbnRyeVswXS5pc0ludGVyc2VjdGluZykge1xyXG5cdFx0XHRjb3VudGVySXRlbXMuZm9yRWFjaCgoY291bnRlcikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHVwZGF0ZUNvdW50ZXIgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBmaW5hbE51bWJlciA9IGNvdW50ZXIuZ2V0QXR0cmlidXRlKFwiZGF0YS1udW1iZXJcIik7XHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGNvdW50ZXIudGV4dENvbnRlbnQpO1xyXG5cdFx0XHRcdFx0Y291bnRlci5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcclxuXHJcblx0XHRcdFx0XHRjb25zdCBzcGVlZCA9IDI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHZhbHVlIDwgZmluYWxOdW1iZXIpIHtcclxuXHRcdFx0XHRcdFx0Y291bnRlci50ZXh0Q29udGVudCA9IGAke01hdGguZmxvb3IodmFsdWUgKyBzcGVlZCl9YDtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCh1cGRhdGVDb3VudGVyLCA1KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGNvdW50ZXIudGV4dENvbnRlbnQgPSBmaW5hbE51bWJlcjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdHVwZGF0ZUNvdW50ZXIoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoc3RhcnRDb3VudGVyLCBvcHRpb25zKTtcclxuXHRvYnNlcnZlci5vYnNlcnZlKGNvdW50ZXJCb3gpO1xyXG5cclxuXHQvLyBHQUxMRVJZXHJcblx0Y29uc3QgaW1hZ2VzQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19pbWFnZXNcIik7XHJcblx0Y29uc3QgYWxsSW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYWxsZXJ5X19pbWdcIik7XHJcblx0Y29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fYnRuLS1uZXh0XCIpO1xyXG5cdGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2J0bi0tcHJldlwiKTtcclxuXHRjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fcG9wdXBcIik7XHJcblx0Y29uc3QgcG9wdXBJbWcgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX3BvcHVwLWltZ1wiKTtcclxuXHRjb25zdCBjbG9zZVBvcHVwQnRuID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jbG9zZS1wb3B1cFwiKTtcclxuXHRsZXQgaW5kZXggPSAxO1xyXG5cdGxldCBzdGVwO1xyXG5cdGxldCB3aWR0aDtcclxuXHJcblx0Y29uc3Qgc2hvd05leHRTbGlkZSA9ICgpID0+IHtcclxuXHRcdGlmIChpbmRleCA9PT0gYWxsSW1hZ2VzLmxlbmd0aCAtIDIpIHtcclxuXHRcdFx0c2hvd05leHRJbWcoKTtcclxuXHRcdFx0bmV4dEJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblx0XHRcdG5leHRCdG4uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cHJldkJ0bi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuXHRcdFx0cHJldkJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcblx0XHRcdG5leHRCdG4uY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRuZXh0QnRuLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRzaG93TmV4dEltZygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0Y29uc3QgdHVybk9uRGlzYWJsZWQgPSAoKSA9PiB7XHJcblx0XHRpZiAod2luZG93LmlubmVyV2lkdGggPD0gOTAwKSB7XHJcblx0XHRcdHByZXZCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRwcmV2QnRuLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdGNvbnN0IHNob3dQcmV2U2xpZGUgPSAoKSA9PiB7XHJcblx0XHRpZiAoaW5kZXggPT09IDEgJiYgd2luZG93LmlubmVyV2lkdGggPj0gOTAwKSB7XHJcblx0XHRcdHNob3dQcmV2SW1nKCk7XHJcblx0XHRcdHByZXZCdG4uY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG5cdFx0XHRwcmV2QnRuLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcclxuXHRcdH0gZWxzZSBpZiAoaW5kZXggPT09IDIgJiYgd2luZG93LmlubmVyV2lkdGggPCA5MDApIHtcclxuXHRcdFx0c2hvd1ByZXZJbWcoKTtcclxuXHRcdFx0cHJldkJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XHJcblx0XHRcdHByZXZCdG4uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmV4dEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcblx0XHRcdG5leHRCdG4ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcblx0XHRcdHNob3dQcmV2SW1nKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHRjb25zdCBzaG93UHJldkltZyA9ICgpID0+IHtcclxuXHRcdGFsbEltYWdlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHRcdGluZGV4LS07XHJcblx0XHRhbGxJbWFnZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcblx0XHRzdGVwID0gd2luZG93LmlubmVyV2lkdGggPj0gOTAwID8gMzMuMzMgOiAxMDA7XHJcblx0XHR3aWR0aCA9IChpbmRleCAtIDEpICogc3RlcDtcclxuXHRcdGltYWdlc0JveC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey13aWR0aH0lKWA7XHJcblx0fTtcclxuXHRjb25zdCBzaG93TmV4dEltZyA9ICgpID0+IHtcclxuXHRcdGFsbEltYWdlc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHRcdGluZGV4Kys7XHJcblxyXG5cdFx0YWxsSW1hZ2VzW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG5cdFx0c3RlcCA9IHdpbmRvdy5pbm5lcldpZHRoID49IDkwMCA/IDMzLjMzIDogMTAwO1xyXG5cdFx0d2lkdGggPSAoaW5kZXggLSAxKSAqIHN0ZXA7XHJcblx0XHRpbWFnZXNCb3guc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstd2lkdGh9JSlgO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNob3dQb3B1cCA9ICgpID0+IHtcclxuXHRcdHBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJwb3B1cC1hY3RpdmVcIik7XHJcblx0fTtcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XHJcblx0XHRzdGVwID0gd2luZG93LmlubmVyV2lkdGggPj0gOTAwID8gMzMuMzMgOiAxMDA7XHJcblx0XHR3aWR0aCA9IChpbmRleCAtIDEpICogc3RlcDtcclxuXHRcdGltYWdlc0JveC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey13aWR0aH0lKWA7XHJcblx0fSk7XHJcblx0cG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcblx0XHRpZiAoZS50YXJnZXQgPT09IHBvcHVwKSB7XHJcblx0XHRcdHNob3dQb3B1cCgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGFsbEltYWdlcy5mb3JFYWNoKChpbWcpID0+XHJcblx0XHRpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0Y29uc3Qgc3JjID0gaW1nLmdldEF0dHJpYnV0ZShcInNyY1wiKTtcclxuXHRcdFx0Y29uc3QgYWx0ID0gaW1nLmdldEF0dHJpYnV0ZShcImFsdFwiKTtcclxuXHRcdFx0cG9wdXBJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNyYyk7XHJcblx0XHRcdHBvcHVwSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBhbHQpO1xyXG5cdFx0XHRzaG93UG9wdXAoKTtcclxuXHRcdH0pXHJcblx0KTtcclxuXHRjbG9zZVBvcHVwQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaG93UG9wdXApO1xyXG5cdHR1cm5PbkRpc2FibGVkKCk7XHJcblx0cHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2hvd1ByZXZTbGlkZSk7XHJcblx0bmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2hvd05leHRTbGlkZSk7XHJcblxyXG5cdC8vIFJFVklFV1NcclxuXHJcblx0Y29uc3QgcmV2aWV3c0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2aWV3c19fcmV2aWV3c1wiKTtcclxuXHRjb25zdCBhbGxSZXZpZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5yZXZpZXdzX19ib3hcIik7XHJcblx0bGV0IHJldmlld3NTcGVlZCA9IDQwMDA7XHJcblx0bGV0IHJldmlld3NJbmRleCA9IDA7XHJcblx0bGV0IHN0YXJ0WDtcclxuXHRsZXQgZW5kWDtcclxuXHRsZXQgcmV2aWV3c0Nhcm91c2VsbEludGVydmFsO1xyXG5cclxuXHRjb25zdCBoYW5kbGVSZXZpZXdzQ2Fyb3VzZWxsID0gKCkgPT4ge1xyXG5cdFx0bGV0IHN0ZXAgPSB3aW5kb3cuaW5uZXJXaWR0aCA+PSA4MDAgPyA1MCA6IDEwMDtcclxuXHRcdGxldCBkZXZpY2VJbmRleCA9XHJcblx0XHRcdHdpbmRvdy5pbm5lcldpZHRoID49IDgwMCA/IGFsbFJldmlld3MubGVuZ3RoIC0gMiA6IGFsbFJldmlld3MubGVuZ3RoIC0gMTtcclxuXHJcblx0XHRpZiAocmV2aWV3c0luZGV4ID49IGRldmljZUluZGV4KSB7XHJcblx0XHRcdHJldmlld3NJbmRleCA9IDA7XHJcblx0XHRcdHJldmlld3NCb3guc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoMClgO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV2aWV3c0luZGV4Kys7XHJcblx0XHRcdGxldCB3aWR0aCA9IHJldmlld3NJbmRleCAqIHN0ZXA7XHJcblx0XHRcdHJldmlld3NCb3guc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoJHstd2lkdGh9JSlgO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHtcclxuXHRcdGxldCBzdGVwID0gd2luZG93LmlubmVyV2lkdGggPj0gODAwID8gNTAgOiAxMDA7XHJcblx0XHRsZXQgd2lkdGggPSByZXZpZXdzSW5kZXggKiBzdGVwO1xyXG5cdFx0cmV2aWV3c0JveC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgkey13aWR0aH0lKWA7XHJcblx0fSk7XHJcblxyXG5cdHJldmlld3NDYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKGhhbmRsZVJldmlld3NDYXJvdXNlbGwsIHJldmlld3NTcGVlZCk7XHJcblxyXG5cdHJldmlld3NCb3guYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHN0YXJ0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xyXG5cdFx0Y2xlYXJJbnRlcnZhbChyZXZpZXdzQ2Fyb3VzZWxsSW50ZXJ2YWwpO1xyXG5cdH0pO1xyXG5cdHJldmlld3NCb3guYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIChlKSA9PiB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRlbmRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xyXG5cdFx0aGFuZGxlU3dpcGUoKTtcclxuXHRcdHJldmlld3NDYXJvdXNlbGxJbnRlcnZhbCA9IHNldEludGVydmFsKFxyXG5cdFx0XHRoYW5kbGVSZXZpZXdzQ2Fyb3VzZWxsLFxyXG5cdFx0XHRyZXZpZXdzU3BlZWRcclxuXHRcdCk7XHJcblx0fSk7XHJcblxyXG5cdGNvbnN0IGhhbmRsZVN3aXBlID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgdGhyZXNob2xkID0gNTA7XHJcblx0XHRjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoID49IDgwMCA/IDUwIDogMTAwO1xyXG5cdFx0Y29uc3QgbWF4SW5kZXggPVxyXG5cdFx0XHR3aW5kb3cuaW5uZXJXaWR0aCA+PSA4MDAgPyBhbGxSZXZpZXdzLmxlbmd0aCAtIDIgOiBhbGxSZXZpZXdzLmxlbmd0aCAtIDE7XHJcblxyXG5cdFx0aWYgKHN0YXJ0WCAtIGVuZFggPiB0aHJlc2hvbGQgJiYgcmV2aWV3c0luZGV4IDwgbWF4SW5kZXgpIHtcclxuXHRcdFx0cmV2aWV3c0luZGV4Kys7XHJcblx0XHR9IGVsc2UgaWYgKGVuZFggLSBzdGFydFggPiB0aHJlc2hvbGQgJiYgcmV2aWV3c0luZGV4ID4gMCkge1xyXG5cdFx0XHRyZXZpZXdzSW5kZXgtLTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXZpZXdzQm94LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7LXdpZHRoICogcmV2aWV3c0luZGV4fSUpYDtcclxuXHR9O1xyXG5cclxuXHQvLyBBQ0NPUkRJT05cclxuXHRjb25zdCBhbGxBY2NvcmRpb25CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFwiLnF1ZXN0aW9uc19fYWNjb3JkaW9uLXRvZ2dsZXJcIlxyXG5cdCk7XHJcblxyXG5cdGFsbEFjY29yZGlvbkJ0bnMuZm9yRWFjaCgodG9nZ2xlcikgPT4ge1xyXG5cdFx0dG9nZ2xlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBib3ggPSB0b2dnbGVyLmNsb3Nlc3QoXCIucXVlc3Rpb25zX19hY2NvcmRpb24tYm94XCIpO1xyXG5cdFx0XHRjb25zdCBhbnN3ZXIgPSBib3gucXVlcnlTZWxlY3RvcihcIi5xdWVzdGlvbnNfX2FjY29yZGlvbi1hbnN3ZXJcIik7XHJcblxyXG5cdFx0XHRjb25zdCBpc09wZW4gPSBhbnN3ZXIuc3R5bGUuaGVpZ2h0ICYmIGFuc3dlci5zdHlsZS5oZWlnaHQgIT09IFwiMHB4XCI7XHJcblx0XHRcdGRvY3VtZW50XHJcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucXVlc3Rpb25zX19hY2NvcmRpb24tYW5zd2VyXCIpXHJcblx0XHRcdFx0LmZvckVhY2goKG90aGVyQW5zd2VyKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAob3RoZXJBbnN3ZXIgIT09IGFuc3dlcikge1xyXG5cdFx0XHRcdFx0XHRvdGhlckFuc3dlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XHJcblx0XHRcdFx0XHRcdG90aGVyQW5zd2VyLnN0eWxlLmhlaWdodCA9IG90aGVyQW5zd2VyLnNjcm9sbEhlaWdodCArIFwicHhcIjtcclxuXHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRvdGhlckFuc3dlci5zdHlsZS5oZWlnaHQgPSBcIjBcIjtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHRjb25zdCBvdGhlclRvZ2dsZXIgPSBvdGhlckFuc3dlclxyXG5cdFx0XHRcdFx0XHRcdC5jbG9zZXN0KFwiLnF1ZXN0aW9uc19fYWNjb3JkaW9uLWJveFwiKVxyXG5cdFx0XHRcdFx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLnF1ZXN0aW9uc19fYWNjb3JkaW9uLXRvZ2dsZXJcIik7XHJcblx0XHRcdFx0XHRcdG90aGVyVG9nZ2xlci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlbmVkXCIpO1xyXG5cdFx0XHRcdFx0XHRvdGhlclRvZ2dsZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcImZhbHNlXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKGlzT3Blbikge1xyXG5cdFx0XHRcdGFuc3dlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XHJcblx0XHRcdFx0dG9nZ2xlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwiZmFsc2VcIik7XHJcblx0XHRcdFx0dG9nZ2xlci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlbmVkXCIpO1xyXG5cdFx0XHRcdGFuc3dlci5zdHlsZS5oZWlnaHQgPSBhbnN3ZXIuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG5cdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRhbnN3ZXIuc3R5bGUuaGVpZ2h0ID0gXCIwXCI7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YW5zd2VyLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwiZmFsc2VcIik7XHJcblx0XHRcdFx0dG9nZ2xlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiKTtcclxuXHRcdFx0XHR0b2dnbGVyLmNsYXNzTGlzdC5hZGQoXCJvcGVuZWRcIik7XHJcblx0XHRcdFx0YW5zd2VyLnN0eWxlLmhlaWdodCA9IGFuc3dlci5zY3JvbGxIZWlnaHQgKyBcInB4XCI7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG59KTtcclxuIl19
